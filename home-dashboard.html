<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ¡åŒºè¿è¥æ•°æ®å¤§å± - å£°åº¦æ˜Ÿä¸»æŒ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <!-- Day.js -->
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
    
    <!-- Data Sources 2025 -->
    <script src="data-2025.js"></script>
    <script src="data-experience-2025.js"></script>
    <script src="data-consumption-2025.js"></script>

    <!-- Data Sources 2026 -->
    <script src="data-2026.js"></script>
    <script src="data-experience-2026.js"></script>
    <script src="data-consumption-2026.js"></script>
    <script>
        // æ·»åŠ ä¸€ä¸ªå…¨å±€å˜é‡è®°å½•æ•°æ®æ›´æ–°æ—¶é—´
        window.ONLINE_SYNC_TIME = "2026-01-29 20:20"; // è¿™é‡Œå¯ä»¥é€šè¿‡è„šæœ¬åŠ¨æ€ä¿®æ”¹
    </script>
    
    <style>
        :root {
            --bg-color: #050a0f;
            --card-bg: rgba(16, 24, 39, 0.8);
            --primary-blue: #00d2ff;
            --secondary-blue: #3a7bd5;
            --accent-cyan: #00f2fe;
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
            --border-color: rgba(0, 210, 255, 0.2);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(0, 210, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 0% 100%, rgba(58, 123, 213, 0.05) 0%, transparent 40%);
        }

        .dashboard-container {
            padding: 1rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 2rem;
            min-height: 80px;
            background: linear-gradient(180deg, rgba(0, 210, 255, 0.1) 0%, transparent 100%);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1rem;
            position: relative;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary-blue), transparent);
        }

        .header-title {
            font-size: 1.75rem;
            font-weight: 800;
            letter-spacing: 4px;
            background: linear-gradient(to bottom, #fff, var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(0, 210, 255, 0.5);
        }

        /* Card Styles */
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: rgba(0, 210, 255, 0.5);
            box-shadow: 0 0 15px rgba(0, 210, 255, 0.2);
        }

        .card-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-title::before {
            content: '';
            width: 4px;
            height: 14px;
            background: var(--primary-blue);
            display: inline-block;
            box-shadow: 0 0 8px var(--primary-blue);
        }

        /* Layout Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 24% 51% 24%;
            gap: 0.75rem;
            flex-grow: 1;
        }

        @media (max-width: 1280px) {
            .dashboard-grid {
                grid-template-columns: 30% 70%;
            }
            .right-col {
                grid-column: span 2;
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .right-col {
                grid-column: span 1;
                grid-template-columns: 1fr;
            }
        }

        /* Components */
        .kpi-value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Arial', sans-serif;
            color: #fff;
        }

        .kpi-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .ranking-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.4rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .rank-num {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            border-radius: 2px;
        }

        .rank-1 { background: #ff4d4f; color: white; }
        .rank-2 { background: #ffa940; color: white; }
        .rank-3 { background: #ffec3d; color: #000; }
        .rank-other { background: #3a7bd5; color: white; }

        /* Announcement Animation */
        .marquee-container {
            width: 100%;
            overflow: hidden;
            position: relative;
            display: flex;
        }

        .marquee-content {
            display: flex;
            gap: 80px;
            white-space: nowrap;
            animation: marquee 15s linear infinite;
        }

        .marquee-content:hover {
            animation-play-state: paused;
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .chart-box {
            width: 100%;
            height: 140px;
        }

        .compact-card {
            padding: 0.75rem !important;
        }

        .compact-kpi-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .fixed-kpi-card {
            height: 110px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .kpi-value-center {
            position: absolute;
            left: 50%;
            top: 55%;
            transform: translate(-50%, -50%);
            width: 100%;
            text-align: center;
        }

        .main-chart-box {
            width: 100%;
            height: 240px;
        }

        [v-cloak] { display: none; }
    </style>
</head>
<body>
    <div id="app" v-cloak class="dashboard-container">
        <!-- Header -->
        <header class="header">
            <div class="flex items-center gap-4">
                <a href="index.html" class="flex items-center gap-2 px-3 py-1 bg-blue-900/40 border border-blue-500/30 rounded-lg hover:bg-blue-800/60 transition-all group">
                    <svg class="w-4 h-4 text-blue-400 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <span class="text-xs font-bold text-blue-300">è¿”å›ä»ªè¡¨ç›˜é¦–é¡µ</span>
                </a>
            </div>
            
            <div class="absolute left-1/2 -translate-x-1/2 flex items-center gap-3">
                <img src="img/logo.png" class="w-12 h-12 object-contain" alt="Logo">
                <h1 class="header-title">å£°åº¦æ˜Ÿä¸»æŒæ•°æ®å¤§å±</h1>
            </div>

            <div class="flex items-center gap-4">
                <!-- Time Range Filter -->
                <div class="flex items-center gap-3">
                    <!-- Primary Toggle -->
                    <div class="flex bg-blue-900/40 border border-blue-500/30 p-0.5 rounded-lg shrink-0">
                        <button v-for="t in ['year', 'quarter', 'month']" :key="t"
                                @click="timeRange = t"
                                :class="['px-3 py-1 rounded text-[10px] font-bold transition-all', timeRange === t ? 'bg-blue-600 text-white shadow-lg' : 'text-blue-400 hover:text-blue-200']">
                            {{ t === 'year' ? 'å¹´åº¦' : t === 'quarter' ? 'å­£åº¦' : 'æœˆåº¦' }}
                        </button>
                    </div>
                    
                    <!-- Secondary Filter (Inline Dropdown) -->
                    <div class="bg-blue-900/40 border border-blue-500/30 px-2 py-1 rounded text-xs animate-in fade-in zoom-in duration-200 w-[120px] shrink-0 flex items-center justify-center">
                        <!-- Year Selector (Always shown when timeRange is year) -->
                        <select v-if="timeRange === 'year'" v-model="selectedYear" class="bg-transparent text-blue-300 outline-none cursor-pointer font-bold w-full text-center">
                            <option value="2025">2025 å¹´åº¦</option>
                            <option value="2026">2026 å¹´åº¦</option>
                        </select>

                        <!-- Quarter Selector (Includes Year) -->
                        <select v-if="timeRange === 'quarter'" v-model="selectedQuarterValue" class="bg-transparent text-blue-300 outline-none cursor-pointer font-bold w-full text-center">
                            <optgroup label="2025å¹´">
                                <option v-for="q in 4" :key="'2025-'+q" :value="'2025-'+q">25å¹´ {{q}}å­£åº¦</option>
                            </optgroup>
                            <optgroup label="2026å¹´">
                                <option v-for="q in 4" :key="'2026-'+q" :value="'2026-'+q">26å¹´ {{q}}å­£åº¦</option>
                            </optgroup>
                        </select>

                        <!-- Month Selector (Includes Year) -->
                        <select v-if="timeRange === 'month'" v-model="selectedMonthValue" class="bg-transparent text-blue-300 outline-none cursor-pointer font-bold w-full text-center">
                            <optgroup label="2025å¹´">
                                <option v-for="m in 12" :key="'2025-'+m" :value="'2025-'+String(m).padStart(2, '0')">25å¹´ {{m}}æœˆ</option>
                            </optgroup>
                            <optgroup label="2026å¹´">
                                <option v-for="m in 12" :key="'2026-'+m" :value="'2026-'+String(m).padStart(2, '0')">26å¹´ {{m}}æœˆ</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
                <div class="text-right flex flex-col justify-center">
                    <div class="text-2xl font-mono text-blue-400 leading-none mb-1">{{ currentTime }}</div>
                    <div class="flex items-center justify-end gap-1 text-slate-400">
                        <button 
                            @click="syncOnlineData" 
                            :disabled="isSyncing"
                            class="p-1 rounded-full transition-all hover:bg-blue-500/20 active:scale-95"
                            :title="isSyncing ? 'æ­£åœ¨åŒæ­¥...' : 'åŒæ­¥è…¾è®¯æ–‡æ¡£'"
                        >
                            <svg 
                                class="w-3.5 h-3.5" 
                                :class="isSyncing ? 'animate-spin text-blue-400' : 'text-slate-500 hover:text-blue-400'"
                                xmlns="http://www.w3.org/2000/svg" 
                                fill="none" 
                                viewBox="0 0 24 24" 
                                stroke="currentColor"
                            >
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                        </button>
                        <span class="text-[10px] font-mono">æœ€è¿‘åŒæ­¥: {{ lastUpdateTime }}</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-grid">
            <!-- Left Column -->
            <div class="flex flex-col gap-3">
                <!-- å­¦å‘˜ä¸è½¬åŒ–æ¦‚å†µ (åœ¨è¯» + æ„å‘ + è¯•å¬) -->
                <div class="glass-card compact-card flex flex-col gap-4" style="height: calc(100% - 0rem);">
                    <!-- åœ¨è¯»å­¦å‘˜éƒ¨åˆ† -->
                    <div class="flex-1">
                        <div class="card-title justify-between mb-2">
                            <span>åœ¨è¯»å­¦å‘˜æ¦‚å†µ</span>
                            <span class="text-[10px] text-blue-500 font-mono">YoY: +12.5%</span>
                        </div>
                        <div class="flex justify-between items-center mb-2">
                            <div class="flex items-center gap-1.5 relative group cursor-help">
                                <div class="kpi-label whitespace-nowrap">åœ¨è¯»</div>
                                <div class="text-base font-bold text-blue-400 leading-tight">{{ kpis.active_students }}</div>
                                <!-- Tooltip remains same -->
                                <div class="absolute bottom-full left-0 mb-2 bg-slate-900/95 border border-blue-500/30 text-[10px] p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-20 pointer-events-none shadow-xl min-w-[150px]">
                                    <div v-for="(data, campus) in realCampusStats" :key="campus" class="mb-2 last:mb-0">
                                        <div class="font-bold text-blue-400 border-b border-blue-500/30 mb-1 pb-1">{{ campus }} ({{ data.active }}äºº)</div>
                                        <div v-for="t in data.teachers.active" class="flex justify-between gap-4 py-0.5">
                                            <span>{{ t.name }}</span>
                                            <span class="text-blue-300">{{ t.count }}äºº</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="kpi-label whitespace-nowrap">æ–°å¢</div>
                                <div class="text-base font-bold text-cyan-400 leading-tight">{{ kpis.new_enrollments }}</div>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="kpi-label whitespace-nowrap">å†å²</div>
                                <div class="text-base font-bold text-slate-400 leading-tight">{{ kpis.total_history }}</div>
                            </div>
                        </div>
                        <div id="activeStudentChart" style="height: 80px; width: 100%;"></div>
                    </div>

                    <!-- æ„å‘å­¦å‘˜éƒ¨åˆ† -->
                    <div class="flex-1 pt-3 border-t border-white/5">
                        <div class="card-title justify-between mb-2">
                            <span>æ„å‘å­¦å‘˜æ¦‚å†µ</span>
                            <span class="text-[10px] px-1 bg-blue-500/20 text-blue-400 rounded">è½¬åŒ–ç‡: {{ kpis.lead_to_exp_rate }}%</span>
                        </div>
                        <div class="flex justify-between items-center mb-2">
                            <div class="flex items-center gap-1.5">
                                <div class="kpi-label whitespace-nowrap">æ„å‘</div>
                                <div class="text-base font-bold text-blue-400 leading-tight">{{ kpis.leads_count }}</div>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="kpi-label whitespace-nowrap">è½¬åŒ–</div>
                                <div class="text-base font-bold text-blue-400 leading-tight">{{ kpis.new_conversion }}</div>
                            </div>
                            <div class="flex items-center gap-1.5">
                                <div class="kpi-label whitespace-nowrap">æ–°å¢</div>
                                <div class="text-base font-bold text-cyan-400 leading-tight">{{ kpis.new_leads }}</div>
                            </div>
                        </div>
                        <div id="leadsChart" style="height: 80px; width: 100%;"></div>
                    </div>

                    <!-- è¯•å¬è½¬åŒ–æ¦‚å†µ -->
                    <div class="flex-1 pt-3 border-t border-white/5">
                        <div class="card-title mb-2">è¯•å¬è½¬åŒ–æ¦‚å†µ</div>
                        <div id="conversionFunnel" style="height: 120px; width: 100%;"></div>
                        <div class="grid grid-cols-3 gap-2 mt-1">
                            <div class="text-center">
                                <div class="text-[9px] text-slate-500">é‚€çº¦</div>
                                <div class="text-xs font-bold text-white">{{ kpis.exp_invited }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-[9px] text-slate-500">åˆ°è®¿</div>
                                <div class="text-xs font-bold text-white">{{ kpis.exp_attended }}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-[9px] text-slate-500">è½¬åŒ–</div>
                                <div class="text-xs font-bold text-white">{{ kpis.exp_enrolled }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center Column -->
            <div class="flex flex-col gap-3 h-full">
                <!-- Top content container to push bottom elements down -->
                <div class="flex flex-col gap-3 flex-1">
                    <!-- Top Message Bar -->
                    <div class="glass-card py-2 bg-blue-900/20 border-blue-500/30">
                        <div class="flex items-center gap-3">
                            <span class="animate-pulse shrink-0">ğŸ“¢</span>
                            <div class="marquee-container">
                                <div class="marquee-content text-blue-300 text-sm font-bold">
                                    <!-- å¤åˆ¶ä¸¤ä»½ä»¥å®ç°æ— ç¼æ»šåŠ¨ -->
                                    <div class="flex gap-20 pr-20">
                                        <span v-for="(msg, index) in latestEnrollmentMsgs" :key="'a-'+index">
                                            {{ msg }}
                                        </span>
                                    </div>
                                    <div class="flex gap-20 pr-20">
                                        <span v-for="(msg, index) in latestEnrollmentMsgs" :key="'b-'+index">
                                            {{ msg }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main KPIs -->
                    <div class="grid grid-cols-2 gap-3">
                        <div class="glass-card fixed-kpi-card bg-gradient-to-br from-blue-900/40 to-transparent flex flex-col items-center justify-center">
                            <!-- Title & Icon Centered -->
                            <div class="card-title mb-1 !before:hidden flex items-center gap-1.5">
                                <div class="w-1 h-3.5 bg-blue-400 shadow-[0_0_8px_#60a5fa] rounded-full"></div>
                                <span>æ€»ä¸šç»© (CNY)</span>
                            </div>
                            <!-- Value Centered with Title -->
                            <div class="text-3xl font-bold text-white mb-2">Â¥{{ formatNumber(kpis.total_revenue) }}</div>
                            
                            <!-- Absolute Stats -->
                            <div class="absolute top-2 right-3 flex flex-col items-end">
                                <span :class="['text-[9px]', kpis.revenue_mom >= 0 ? 'text-green-400' : 'text-red-400']">
                                    ç¯æ¯” {{ kpis.revenue_mom >= 0 ? '+' : '' }}{{ kpis.revenue_mom }}% {{ kpis.revenue_mom >= 0 ? 'â†‘' : 'â†“' }}
                                </span>
                                <span v-if="timeRange !== 'year'" :class="['text-[9px]', kpis.revenue_yoy >= 0 ? 'text-blue-400' : 'text-red-400']">
                                    åŒæ¯” {{ kpis.revenue_yoy >= 0 ? '+' : '' }}{{ kpis.revenue_yoy }}% {{ kpis.revenue_yoy >= 0 ? 'â†‘' : 'â†“' }}
                                </span>
                            </div>
                            <div class="absolute bottom-2 right-3 text-right">
                                <div class="text-[9px] text-blue-400">è®¢å•: {{ kpis.order_count }}</div>
                                <div class="text-[9px] text-slate-500">å®¢å•ä»·: Â¥{{ formatNumber(kpis.total_revenue / (kpis.order_count || 1)) }}</div>
                            </div>
                        </div>
                        <div class="glass-card fixed-kpi-card bg-gradient-to-br from-purple-900/40 to-transparent flex flex-col items-center justify-center">
                            <!-- Title & Icon Centered -->
                            <div class="card-title mb-1 !before:hidden flex items-center gap-1.5">
                                <div class="w-1 h-3.5 bg-purple-400 shadow-[0_0_8px_#a855f7] rounded-full"></div>
                                <span>æ€»è¯¾æ¶ˆäººæ¬¡</span>
                            </div>
                            <!-- Value Centered with Title -->
                            <div class="text-3xl font-bold text-white mb-2">{{ formatNumber(kpis.total_consumption_count) }}</div>

                            <!-- Absolute Stats -->
                            <div class="absolute top-2 right-3">
                                <span class="text-[10px] text-purple-400">å®Œæˆç‡ {{ (kpis.total_consumption_amount / 50000 * 100).toFixed(0) }}%</span>
                            </div>
                            <div class="absolute bottom-2 right-3 text-right">
                                <div class="text-[9px] text-purple-400">é‡‘é¢: Â¥{{ formatNumber(kpis.total_consumption_amount) }}</div>
                                <div class="text-[9px] text-slate-500">äººå‡è¯¾è´¹: Â¥{{ formatNumber(kpis.total_consumption_amount / (kpis.total_consumption_count || 1)) }}</div>
                            </div>
                        </div>
                    </div>

                    <!-- Revenue Trend -->
                    <div class="glass-card flex-1 flex flex-col">
                        <div class="card-title">æœºæ„æ€»ä¸šç»©è¶‹åŠ¿</div>
                        <div id="revenueTrendChart" class="flex-1 w-full min-h-[180px]"></div>
                    </div>
                </div>

                <!-- Teacher Rankings & Distribution (Aligned at bottom) -->
                <div class="grid grid-cols-2 gap-3 mt-auto" style="height: 240px;">
                    <div class="glass-card compact-card flex flex-col">
                        <div class="card-title">è€å¸ˆä¸šç»©æ’å</div>
                        <div class="flex-1 space-y-2 mt-1 overflow-y-auto scrollbar-hide">
                            <div v-for="(item, index) in teacherRevenueRankings" :key="index" class="flex items-center gap-3 py-1 border-b border-white/5 last:border-0">
                                <span :class="['rank-num shrink-0', index < 3 ? 'rank-' + (index + 1) : 'rank-other']" style="width:16px; height:16px; font-size:9px">{{ index + 1 }}</span>
                                <div class="flex-grow min-w-0">
                                    <div class="flex justify-between text-[11px] mb-0.5">
                                        <span class="text-slate-200 truncate">{{ item.name }}</span>
                                        <span class="text-blue-400 font-mono font-bold">Â¥{{ formatNumber(item.value) }}</span>
                                    </div>
                                    <div class="w-full h-1 bg-slate-800 rounded-full overflow-hidden">
                                        <div class="h-full bg-blue-500/50" :style="{ width: (item.value / (teacherRevenueRankings[0].value || 1) * 100) + '%' }"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card compact-card flex flex-col">
                        <div class="card-title">æ–°ç­¾ç»­æŠ¥å æ¯”</div>
                        <div id="enrollmentRatioChart" class="flex-1 w-full"></div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="flex flex-col gap-3 right-col h-full">
                <!-- Top content container to push bottom elements down -->
                <div class="flex flex-col gap-3 flex-1">
                    <!-- è€å¸ˆè¯¾æ¶ˆæ’å -->
                    <div class="glass-card flex-1 flex flex-col min-h-[180px]">
                        <div class="card-title">è€å¸ˆè¯¾æ¶ˆæ’å</div>
                        <div class="mt-2 flex-1 overflow-y-auto scrollbar-hide">
                            <table class="w-full text-left text-[10px]">
                                <thead class="text-slate-500 border-b border-white/10 sticky top-0 bg-[#101827] z-10">
                                    <tr>
                                        <th class="pb-1">è€å¸ˆ</th>
                                        <th class="pb-1 text-right">è¯¾æ¶ˆäººæ¬¡</th>
                                        <th class="pb-1 text-right">è¯¾æ¶ˆé‡‘é¢</th>
                                    </tr>
                                </thead>
                                <tbody class="text-slate-300">
                                    <tr v-for="(item, index) in teacherConsumptionRankings" :key="index" class="border-b border-white/5">
                                        <td class="py-2 flex items-center gap-2">
                                            <span :class="['rank-num', index < 3 ? 'rank-' + (index + 1) : 'rank-other']" style="width:14px; height:14px; font-size:9px">{{ index + 1 }}</span>
                                            <span class="truncate w-20">{{ item.name }}</span>
                                        </td>
                                        <td class="py-2 text-right font-mono">{{ formatNumber(item.count) }}</td>
                                        <td class="py-2 text-right font-mono text-blue-400">{{ formatNumber(item.amount) }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- è¯¾æ¶ˆæ¦‚å†µ -->
                    <div class="glass-card">
                        <div class="card-title">è¯¾æ¶ˆæ¦‚å†µ</div>
                        <div class="grid grid-cols-3 gap-2 text-center mb-2">
                            <div>
                                <div class="kpi-label">æŠ¥åæ€»å­¦è´¹</div>
                                <div class="kpi-value text-sm">Â¥{{ formatNumber(kpis.total_revenue) }}</div>
                            </div>
                            <div>
                                <div class="kpi-label">è¯¾æ¶ˆé‡‘é¢</div>
                                <div class="kpi-value text-sm text-cyan-400">Â¥{{ formatNumber(kpis.total_consumption_amount) }}</div>
                            </div>
                            <div>
                                <div class="kpi-label">å‰©ä½™å­¦è´¹</div>
                                <div class="kpi-value text-sm text-orange-400">Â¥{{ formatNumber(kpis.total_revenue - kpis.total_consumption_amount) }}</div>
                            </div>
                        </div>
                        <div id="consumptionChart" class="chart-box" style="height: 100px;"></div>
                    </div>
                </div>

                <!-- è€å¸ˆå‡ºå‹¤ç»Ÿè®¡ (Flexible height to show all) -->
                <div class="glass-card compact-card mt-auto flex flex-col min-h-[240px]">
                    <div class="card-title justify-between mb-2">
                        <span>ä¸Šè¯¾å‡ºå‹¤ç»Ÿè®¡</span>
                        <span class="text-[9px] text-slate-500">å‡ºå‹¤ç‡ = å‡ºå‹¤ / åº”åˆ°</span>
                    </div>
                    <div class="flex-1 space-y-2">
                        <div v-for="(item, index) in teacherAttendanceRankings" :key="index" class="relative pb-1 border-b border-slate-800/30 last:border-0">
                            <div class="flex justify-between text-[10px] mb-0.5">
                                <span class="text-slate-200 font-medium">{{ item.name }}</span>
                                <span class="text-cyan-400 font-mono font-bold">{{ item.rate }}%</span>
                            </div>
                            <div class="w-full h-1 bg-slate-800/50 rounded-full overflow-hidden">
                                <div 
                                    class="h-full bg-gradient-to-r from-blue-600 to-cyan-400 transition-all duration-1000 shadow-[0_0_8px_rgba(0,210,255,0.4)]"
                                    :style="{ width: item.rate + '%' }"
                                ></div>
                            </div>
                            <div class="flex justify-between text-[8px] text-slate-500 mt-0.5">
                                <span>å‡ºå‹¤: <span class="text-slate-400">{{ item.attended }}</span></span>
                                <span>åº”åˆ°: <span class="text-slate-400">{{ item.total }}</span></span>
                            </div>
                        </div>
                        <div v-if="teacherAttendanceRankings.length === 0" class="text-center text-slate-500 text-[10px] py-10">
                            æš‚æ— å‡ºå‹¤æ•°æ®
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Main Dashboard Script -->
    <script src="home-dashboard.js"></script>
</body>
</html>
